# Customizable Dashboard with Fraud & Risk Widgets

## Overview
Successfully converted the main dashboard to a **customizable widget-based system** with multiple chart types connected to fraud and risk data points.

## Features Implemented

### 1. Widget System
- **Customizable Widgets**: Users can enable/disable widgets from settings
- **Settings Panel**: Toggle widget visibility with persistent UI
- **Reset to Default**: Restore all widgets to default state
- **Responsive Grid**: 2-column layout that adapts to screen size

### 2. Chart Components

#### Line Chart (`LineChart.tsx`)
- Smooth curve visualization of time-series data
- Grid background for readability
- Semi-transparent fill area under the curve
- Date labels at start, middle, and end
- **Use Cases**: Fraud trends, transaction volume, daily alerts

#### Bar Chart (`BarChart.tsx`)
- Vertical bar comparison visualization
- Proportional scaling based on max value
- Grid background
- Category labels below bars
- **Use Cases**: Fraud by type, high-risk merchants, regional comparison

#### Pie Chart (`PieChart.tsx`)
- Circular proportional visualization
- Color-coded segments with legend
- Percentage display
- Hover-friendly legend positioning
- **Use Cases**: Risk distribution by level, fraud category breakdown

### 3. Dashboard Widgets

**Available Widgets:**

1. **Fraud Cases Trend** (Line Chart)
   - Visualizes fraud cases over 30 days
   - Identifies patterns and spikes
   - Data key: `fraudTrendData`

2. **Risk Level Distribution** (Pie Chart)
   - Shows breakdown: Low, Medium, High, Critical
   - Color-coded: Green, Yellow, Red, Purple
   - Data key: `riskDistributionData`

3. **Fraud Cases by Type** (Bar Chart)
   - Account Takeover, Credit Card Fraud, Identity Theft, etc.
   - Comparative heights show frequency
   - Data key: `fraudByTypeData`

4. **Transaction Volume** (Line Chart)
   - Daily transaction counts
   - Identifies peak usage periods
   - Data key: `transactionVolumeData`

5. **High Risk Merchants** (Bar Chart)
   - Top merchants with high fraud indicators
   - Sortable by risk score
   - Data key: `highRiskMerchantsData`

6. **Daily Security Alerts** (Line Chart)
   - Number of alerts triggered daily
   - Detects anomalies in security events
   - Data key: `dailyAlertsData`

### 4. Data Integration Points

#### Key Stats (Top Section)
- **Total Fraud Cases**: With trend indicator
- **Total Transactions**: With trend indicator  
- **Risk Level**: Current overall platform risk
- **Average Risk Score**: Calculated metric

#### Mock Data Structure
All widgets currently use mock data generated by `generateMockData()`:
```typescript
{
  stats: {
    totalFraudCases: { value, trendPct, trendDirection },
    totalTransactions: { value, trendPct, trendDirection },
    riskLevel: { value, trendPct, trendDirection },
    avgRiskScore: { value, trendPct, trendDirection }
  },
  fraudTrendData: [{ label, value }, ...],
  riskDistributionData: [{ label, value, color }, ...],
  fraudByTypeData: [{ label, value }, ...],
  transactionVolumeData: [{ label, value }, ...],
  highRiskMerchantsData: [{ label, value }, ...],
  dailyAlertsData: [{ label, value }, ...]
}
```

## File Structure

```
src/
├── components/
│   ├── dashboard/
│   │   └── DashboardWidget.tsx      # Reusable widget wrapper component
│   └── charts/
│       ├── LineChart.tsx             # Line chart visualization
│       ├── BarChart.tsx              # Bar chart visualization
│       └── PieChart.tsx              # Pie chart visualization
├── pages/
│   ├── DashboardPageNew.tsx          # New customizable dashboard
│   └── AppRoutes.tsx                 # Updated to use new dashboard
```

## Component API

### DashboardWidget
```tsx
interface DashboardWidgetProps {
  id: string
  title: string
  subtitle?: string
  children: ReactNode
  onRemove?: () => void
  onExpand?: () => void
  isLoading?: boolean
  error?: string | null
}
```

### LineChart
```tsx
interface LineChartProps {
  data: Array<{ label: string; value: number }>
  height?: number
  color?: string
}
```

### BarChart
```tsx
interface BarChartProps {
  data: Array<{ label: string; value: number }>
  height?: number
  color?: string
}
```

### PieChart
```tsx
interface PieChartProps {
  data: Array<{ label: string; value: number; color?: string }>
  height?: number
}
```

## Customization Instructions

### Adding New Widgets

1. **Define Widget in `AVAILABLE_WIDGETS`**:
```tsx
{ 
  id: 'unique-id', 
  type: 'line' | 'bar' | 'pie',
  title: 'Widget Title',
  subtitle: 'Subtitle',
  dataKey: 'dataKeyInDataObject',
  enabled: true 
}
```

2. **Add Data Generator**:
```tsx
const newWidgetData = [
  { label: 'Label 1', value: 100 },
  { label: 'Label 2', value: 150 },
  // ...
]
```

3. **Include in Widget Rendering**:
```tsx
{widget.type === 'new-type' && chartData && <CustomChart data={chartData} />}
```

### Connecting to Real APIs

Replace mock data with actual API calls:

```tsx
// In useEffect
const fraudData = await Api.fraudApi.getFraudTrend(30)
const riskData = await Api.riskApi.getRiskDistribution()
// ... other API calls

setData({
  fraudTrendData: fraudData,
  riskDistributionData: riskData,
  // ... other data
})
```

### Styling Charts

Chart colors can be customized:
```tsx
<LineChart data={data} color="#ef4444" />
<BarChart data={data} color="#10b981" />
<PieChart data={data} />  // Uses predefined color palette
```

## Current Status

✅ **Completed:**
- Dashboard widget system
- 3 chart types (Line, Bar, Pie)
- 6 fraud/risk widgets
- Settings panel with toggle
- Mock data generation
- Responsive layout
- Error handling
- Loading states

⏳ **Ready for Integration:**
- Fraud trend API endpoint
- Risk distribution API endpoint
- Fraud by type API endpoint
- Transaction volume API endpoint
- High risk merchants API endpoint
- Daily alerts API endpoint

## Next Steps

1. **API Integration**: Connect widgets to actual fraud/risk data endpoints
2. **Data Refresh**: Implement auto-refresh intervals
3. **Filters**: Add date range, merchant, region filters
4. **Export**: Add CSV/PDF export functionality
5. **Real-time**: Implement WebSocket for live updates
6. **Benchmarks**: Add historical comparison and trend analysis
7. **Alerts**: Add threshold-based notifications

## Notes

- Charts use SVG for scalability and no external dependencies
- All components are TypeScript with full type safety
- Responsive design works on mobile and desktop
- Loading and error states handled for all widgets
- Mock data is randomized for demonstration purposes
